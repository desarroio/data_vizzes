"Pirate Ship" <- "<font face='Gulim'>Cruise Ship</font>")
leaflet(df) %>% addTiles() %>%
addAwesomeMarkers(icon = ~IconSet[type], group=~groups[type]) %>%
addLayersControl(
overlayGroups = groups,
options = layersControlOptions(collapsed = FALSE)
)
# group names:
groups <- c("Cruise Ship" <- "<font face='Gulim'>Cruise Ship</font>",
"Pirate Ship" <- "<font face='Gulim'>Cruise Ship</font")
# group names:
groups <- c("Cruise Ship" <- "<font face='Gulim'>Cruise Ship</font>",
"Pirate Ship" <- "<font face='Gulim'>Cruise Ship</font")
leaflet(df) %>% addTiles() %>%
addAwesomeMarkers(icon = ~IconSet[type], group=~groups[type]) %>%
addLayersControl(
overlayGroups = groups,
options = layersControlOptions(collapsed = FALSE)
)
# group names:
groups <- c("Cruise Ship" <- "<font face='Gulim'>Cruise Ship</font>",
"Pirate Ship" <- "<font face='Gulim'>Cruise Ship</font>")
leaflet(df) %>% addTiles() %>%
addAwesomeMarkers(icon = ~IconSet[type], group=~groups[type]) %>%
addLayersControl(
overlayGroups = groups,
options = layersControlOptions(collapsed = FALSE)
)
# group names:
groups <- c("Cruise Ship" <- "<font face='Gulim'>Cruise Ship</font>",
"Pirate Ship" <- "<font face='Gulim'>Cruise Ship</font")
leaflet(df) %>% addTiles() %>%
addAwesomeMarkers(icon = ~IconSet[type], group=~groups[type]) %>%
addLayersControl(
overlayGroups = groups,
options = layersControlOptions(collapsed = FALSE)
)
# group names:
groups <- c("Cruise Ship" <- "<font face='Gulim'>Cruise Ship</font>",
"Pirate Ship" <- "<font face='Gulim'>Pirate Ship</font")
leaflet(df) %>% addTiles() %>%
addAwesomeMarkers(icon = ~IconSet[type], group=~groups[type]) %>%
addLayersControl(
overlayGroups = groups,
options = layersControlOptions(collapsed = FALSE)
)
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font>",
"distritos" <- "<font face='Gulim'>distritos</font")
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font>",
"distritos" <- "<font face='Gulim'>distritos</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = groups,
options = layersControlOptions( collapsed = FALSE))
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(leaflet)
library(dplyr)
library(stringr)
library(ggplot2)
library(readr)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(3, 4, 22)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(3, 4, 22)
not <-
st_read("data/not_sel_coll_all_simp10.geojson", quiet = TRUE)
distritos <-
st_read("data/distritos.geojson", quiet = TRUE) %>% select(1:6) %>% filter(IDDPTO == "07" |
IDPROV == "1501")
# db_females <- read_csv("gdb_females.csv", col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
db_males <- read_csv("gdb_males.csv", col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
db_not <- read_csv("gdb_not.csv",  col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
females <- females %>%
filter(!str_detect(name, "Florencia|Cordillera Blanca|Nevado Sara Sara|América|La Luz|Rio Santa|Marbella|Bajada de Agua Dulce|Tingo|La Marina|Libertad|la Marina|Esperanza|Irlanda|Agua Marina|Río Santa|Esmeralda|Villa Maria|Villa María|Las Mercedes|La Victoria|La Merced|Belén|Mayor Arce de la Oliva|Arnaldo Márquez|Belen|Alheli|de las Mercedes|Vila Mercedes|Franciso de Paula Ugarriza|Agua Dulce|Galvez Barrenechea|Pissarro|Stowe|Río Elba|Talavera de la Reina|El Palo Rosa|Laurel Rosa|La Calera de la Merced|Keller|Coral|Arnaldo Panizo|Villa Mercedes|La Estrella|Antinio Bastidas|Aguada Blanca|La Caridad|A La Rosa|Mara Caibo|Mar Coral|San Teresita|Torre Blanca|Bella Luz|Luz de Luna|Rio Elba|Estrella|Torres de la Merced|Merino Reyna Oeste|Estrella Polar|Sara Sara|Señor de la Soledad|Puente America|America Unamarca|Palmira|Merced|Cristal|Meier|Merced|Cerro Paloma|J.C. María Tegui|El Dulce|Cielo Punko|Caridad|Azucena|La Veronica|María Tegui|Iris|Arnaldo Marquez|Arco Iris|Margarita|La Perla|Fatima|Isis|Barrenechea|Reyna Talavera|America|Soledad|La Soledad|Las Nieves|Alma")) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
females_notrel <- females %>% filter(!str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
females_rel <- females %>% filter(str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
db_females <- females %>% st_drop_geometry()
db_males <- db_males %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
db_not <- db_not %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
db_all <- bind_rows(db_females, db_males, db_not)
db_all$genero <- as.factor(db_all$genero)
levels(db_all$genero) <- c("mujeres", "hombres", "ninguno")
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font>",
"distritos" <- "<font face='Gulim'>distritos</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = groups,
options = layersControlOptions( collapsed = FALSE))
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font>",
"distritos" <- "<font face='Gulim'>distritos</font>")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = groups,
options = layersControlOptions( collapsed = FALSE))
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font>",
"otras calles" <- "<font face='Gulim'>otras calles</font>")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = groups,
options = layersControlOptions( collapsed = FALSE))
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font>",
"otras calles" <- "<font face='Gulim'>otras calles</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = groups,
options = layersControlOptions( collapsed = FALSE))
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font>",
"otras calles" <- "<font face='Gulim'>otras calles</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) #%>%
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) #%>%
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) #%>%
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>","hombres" <- "<font face='Gulim'>hombres</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) #%>%
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = c( "figuras religiosas mujeres", "hombres", "distritos"),
options = layersControlOptions( collapsed = FALSE))
females <- females %>%
filter(!str_detect(name, "Florencia|Cordillera Blanca|Nevado Sara Sara|América|La Luz|Rio Santa|Marbella|Bajada de Agua Dulce|Tingo|La Marina|Libertad|la Marina|Esperanza|Irlanda|Agua Marina|Río Santa|Esmeralda|Villa Maria|Villa María|Las Mercedes|La Victoria|La Merced|Belén|Mayor Arce de la Oliva|Arnaldo Márquez|Belen|Alheli|de las Mercedes|Vila Mercedes|Franciso de Paula Ugarriza|Agua Dulce|Galvez Barrenechea|Pissarro|Stowe|Río Elba|Talavera de la Reina|El Palo Rosa|Laurel Rosa|La Calera de la Merced|Keller|Coral|Arnaldo Panizo|Villa Mercedes|La Estrella|Antinio Bastidas|Aguada Blanca|La Caridad|A La Rosa|Mara Caibo|Mar Coral|San Teresita|Torre Blanca|Bella Luz|Luz de Luna|Rio Elba|Estrella|Torres de la Merced|Merino Reyna Oeste|Estrella Polar|Sara Sara|Señor de la Soledad|Puente America|America Unamarca|Palmira|Merced|Cristal|Meier|Merced|Cerro Paloma|J.C. María Tegui|El Dulce|Cielo Punko|Caridad|Azucena|La Veronica|María Tegui|Iris|Arnaldo Marquez|Arco Iris|Margarita|La Perla|Fatima|Isis|Barrenechea|Reyna Talavera|America|Soledad|La Soledad|Las Nieves|Alma")) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
females_notrel <- females %>% filter(!str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
females_rel <- females %>% filter(str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
db_females <- females %>% st_drop_geometry()
db_males <- db_males %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
db_not <- db_not %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
db_all <- bind_rows(db_females, db_males, db_not)
db_all$genero <- as.factor(db_all$genero)
levels(db_all$genero) <- c("mujeres", "hombres", "ninguno")
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(leaflet)
library(dplyr)
library(stringr)
library(ggplot2)
library(readr)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(3, 4, 22)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(3, 4, 22)
not <-
st_read("data/not_sel_coll_all_simp10.geojson", quiet = TRUE)
distritos <-
st_read("data/distritos.geojson", quiet = TRUE) %>% select(1:6) %>% filter(IDDPTO == "07" |
IDPROV == "1501")
# db_females <- read_csv("gdb_females.csv", col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
db_males <- read_csv("gdb_males.csv", col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
db_not <- read_csv("gdb_not.csv",  col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
females <- females %>%
filter(!str_detect(name, "Florencia|Cordillera Blanca|Nevado Sara Sara|América|La Luz|Rio Santa|Marbella|Bajada de Agua Dulce|Tingo|La Marina|Libertad|la Marina|Esperanza|Irlanda|Agua Marina|Río Santa|Esmeralda|Villa Maria|Villa María|Las Mercedes|La Victoria|La Merced|Belén|Mayor Arce de la Oliva|Arnaldo Márquez|Belen|Alheli|de las Mercedes|Vila Mercedes|Franciso de Paula Ugarriza|Agua Dulce|Galvez Barrenechea|Pissarro|Stowe|Río Elba|Talavera de la Reina|El Palo Rosa|Laurel Rosa|La Calera de la Merced|Keller|Coral|Arnaldo Panizo|Villa Mercedes|La Estrella|Antinio Bastidas|Aguada Blanca|La Caridad|A La Rosa|Mara Caibo|Mar Coral|San Teresita|Torre Blanca|Bella Luz|Luz de Luna|Rio Elba|Estrella|Torres de la Merced|Merino Reyna Oeste|Estrella Polar|Sara Sara|Señor de la Soledad|Puente America|America Unamarca|Palmira|Merced|Cristal|Meier|Merced|Cerro Paloma|J.C. María Tegui|El Dulce|Cielo Punko|Caridad|Azucena|La Veronica|María Tegui|Iris|Arnaldo Marquez|Arco Iris|Margarita|La Perla|Fatima|Isis|Barrenechea|Reyna Talavera|America|Soledad|La Soledad|Las Nieves|Alma")) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
females_notrel <- females %>% filter(!str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
females_rel <- females %>% filter(str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
db_females <- females %>% st_drop_geometry()
db_males <- db_males %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
db_not <- db_not %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "",
'Jirón ' = "", 'Av ' = "")))
db_all <- bind_rows(db_females, db_males, db_not)
db_all$genero <- as.factor(db_all$genero)
levels(db_all$genero) <- c("mujeres", "hombres", "ninguno")
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = c( "figuras religiosas mujeres", "hombres", "distritos"),
options = layersControlOptions( collapsed = FALSE))
m
females <- females %>%
filter(!str_detect(name, "Florencia|Cordillera Blanca|Nevado Sara Sara|América|La Luz|Rio Santa|Marbella|Bajada de Agua Dulce|Tingo|La Marina|Libertad|la Marina|Esperanza|Irlanda|Agua Marina|Río Santa|Esmeralda|Villa Maria|Villa María|Las Mercedes|La Victoria|La Merced|Belén|Mayor Arce de la Oliva|Arnaldo Márquez|Belen|Alheli|de las Mercedes|Vila Mercedes|Franciso de Paula Ugarriza|Agua Dulce|Galvez Barrenechea|Pissarro|Stowe|Río Elba|Talavera de la Reina|El Palo Rosa|Laurel Rosa|La Calera de la Merced|Keller|Coral|Arnaldo Panizo|Villa Mercedes|La Estrella|Antinio Bastidas|Aguada Blanca|La Caridad|A La Rosa|Mara Caibo|Mar Coral|San Teresita|Torre Blanca|Bella Luz|Luz de Luna|Rio Elba|Estrella|Torres de la Merced|Merino Reyna Oeste|Estrella Polar|Sara Sara|Señor de la Soledad|Puente America|America Unamarca|Palmira|Merced|Cristal|Meier|Merced|Cerro Paloma|J.C. María Tegui|El Dulce|Cielo Punko|Caridad|Azucena|La Veronica|María Tegui|Iris|Arnaldo Marquez|Arco Iris|Margarita|La Perla|Fatima|Isis|Barrenechea|Reyna Talavera|America|Soledad|La Soledad|Las Nieves|Alma")) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
females_notrel <- females %>% filter(!str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
females_rel <- females %>% filter(str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
db_females <- females %>% st_drop_geometry()
db_males <- db_males %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
db_not <- db_not %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
db_all <- bind_rows(db_females, db_males, db_not)
db_all$genero <- as.factor(db_all$genero)
levels(db_all$genero) <- c("mujeres", "hombres", "ninguno")
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = c( "figuras religiosas mujeres", "hombres", "distritos"),
options = layersControlOptions( collapsed = FALSE))
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(leaflet)
library(dplyr)
library(stringr)
library(ggplot2)
library(readr)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(3, 4, 22)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(3, 4, 22)
not <-
st_read("data/not_sel_coll_all_simp10.geojson", quiet = TRUE)
distritos <-
st_read("data/distritos.geojson", quiet = TRUE) %>% select(1:6) %>% filter(IDDPTO == "07" |
IDPROV == "1501")
# db_females <- read_csv("gdb_females.csv", col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
db_males <- read_csv("gdb_males.csv", col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
db_not <- read_csv("gdb_not.csv",  col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
females <- females %>%
filter(!str_detect(name, "Florencia|Cordillera Blanca|Nevado Sara Sara|América|La Luz|Rio Santa|Marbella|Bajada de Agua Dulce|Tingo|La Marina|Libertad|la Marina|Esperanza|Irlanda|Agua Marina|Río Santa|Esmeralda|Villa Maria|Villa María|Las Mercedes|La Victoria|La Merced|Belén|Mayor Arce de la Oliva|Arnaldo Márquez|Belen|Alheli|de las Mercedes|Vila Mercedes|Franciso de Paula Ugarriza|Agua Dulce|Galvez Barrenechea|Pissarro|Stowe|Río Elba|Talavera de la Reina|El Palo Rosa|Laurel Rosa|La Calera de la Merced|Keller|Coral|Arnaldo Panizo|Villa Mercedes|La Estrella|Antinio Bastidas|Aguada Blanca|La Caridad|A La Rosa|Mara Caibo|Mar Coral|San Teresita|Torre Blanca|Bella Luz|Luz de Luna|Rio Elba|Estrella|Torres de la Merced|Merino Reyna Oeste|Estrella Polar|Sara Sara|Señor de la Soledad|Puente America|America Unamarca|Palmira|Merced|Cristal|Meier|Merced|Cerro Paloma|J.C. María Tegui|El Dulce|Cielo Punko|Caridad|Azucena|La Veronica|María Tegui|Iris|Arnaldo Marquez|Arco Iris|Margarita|La Perla|Fatima|Isis|Barrenechea|Reyna Talavera|America|Soledad|La Soledad|Las Nieves|Alma")) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
females_notrel <- females %>% filter(!str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
females_rel <- females %>% filter(str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
db_females <- females %>% st_drop_geometry()
db_males <- db_males %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
db_not <- db_not %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
db_all <- bind_rows(db_females, db_males, db_not)
db_all$genero <- as.factor(db_all$genero)
levels(db_all$genero) <- c("mujeres", "hombres", "ninguno")
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = groups,
options = layersControlOptions( collapsed = FALSE))
library(sf)
library(readr)
gdb_females22 <- read_csv("genero_calles/data/gdb_females22.csv",
col_types = cols(genero = col_character()))
st_read(gb_females22)
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(leaflet)
library(dplyr)
library(stringr)
library(ggplot2)
library(readr)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(3, 4, 22)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) #%>% select(3, 4, 22)
head(females)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(3, 4, 22)
head(females)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) #%>% select(3, 4, 22)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(3, 4, 22)
not <-
st_read("data/not_sel_coll_all_simp10.geojson", quiet = TRUE)
distritos <-
st_read("data/distritos.geojson", quiet = TRUE) %>% select(1:6) %>% filter(IDDPTO == "07" |
IDPROV == "1501")
names(females)
names(males)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(7, 21, 22)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(7, 21, 22)
males
names(not)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(7)
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(7, 21, 22)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(7)
not <-
st_read("data/not_sel_coll_all_simp10.geojson", quiet = TRUE)
distritos <-
st_read("data/distritos.geojson", quiet = TRUE) %>% select(1:6) %>% filter(IDDPTO == "07" |
IDPROV == "1501")
db_males <- read_csv("gdb_males.csv", col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
db_not <- read_csv("gdb_not.csv",  col_types = cols(X1 = col_skip(), osm_id = col_skip(), railway = col_skip(), amenity = col_skip(), operator = col_skip(), parking = col_skip(), surface = col_skip(), tunnel = col_skip(), oneway = col_skip(), geometry = col_skip(), bridge = col_skip(), smoothness = col_skip(), width = col_skip(), capacity = col_skip(), layer = col_skip(),  public_tra = col_skip(), aeroway = col_skip(), building = col_skip(),  barrier = col_skip(), names = col_skip(), genero = col_character(),  `_merge` = col_skip()))
females <- females %>%
filter(!str_detect(name, "Florencia|Cordillera Blanca|Nevado Sara Sara|América|La Luz|Rio Santa|Marbella|Bajada de Agua Dulce|Tingo|La Marina|Libertad|la Marina|Esperanza|Irlanda|Agua Marina|Río Santa|Esmeralda|Villa Maria|Villa María|Las Mercedes|La Victoria|La Merced|Belén|Mayor Arce de la Oliva|Arnaldo Márquez|Belen|Alheli|de las Mercedes|Vila Mercedes|Franciso de Paula Ugarriza|Agua Dulce|Galvez Barrenechea|Pissarro|Stowe|Río Elba|Talavera de la Reina|El Palo Rosa|Laurel Rosa|La Calera de la Merced|Keller|Coral|Arnaldo Panizo|Villa Mercedes|La Estrella|Antinio Bastidas|Aguada Blanca|La Caridad|A La Rosa|Mara Caibo|Mar Coral|San Teresita|Torre Blanca|Bella Luz|Luz de Luna|Rio Elba|Estrella|Torres de la Merced|Merino Reyna Oeste|Estrella Polar|Sara Sara|Señor de la Soledad|Puente America|America Unamarca|Palmira|Merced|Cristal|Meier|Merced|Cerro Paloma|J.C. María Tegui|El Dulce|Cielo Punko|Caridad|Azucena|La Veronica|María Tegui|Iris|Arnaldo Marquez|Arco Iris|Margarita|La Perla|Fatima|Isis|Barrenechea|Reyna Talavera|America|Soledad|La Soledad|Las Nieves|Alma")) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
females_notrel <- females %>% filter(!str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
females_rel <- females %>% filter(str_detect(name, "Sor|Santa|Beata|Virgen|sor|santa |beata|virgen|María Auxiliadora"))
db_females <- females %>% st_drop_geometry()
db_males <- db_males %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
db_not <- db_not %>% select(name, highway, genero) %>%
mutate(name = str_replace_all(name, pattern = c('Calle ' = "", 'Pasaje ' = "", 'Avenida ' = "", 'Jirón ' = "", 'Av ' = "", 'Malecón ' = "", 'Malecon ' = "", 'Salida a ' = "", 'Puente ' = "", 'Alameda ' = "", 'Ovalo ' = "" )))
db_all <- bind_rows(db_females, db_males, db_not)
db_all$genero <- as.factor(db_all$genero)
levels(db_all$genero) <- c("mujeres", "hombres", "ninguno")
lw <- 3 # set line weight in pixels
lo <- 0.4 # set line opacity
groups <- c("figuras religiosas mujeres" <- "<font face='Gulim'>figuras religiosas mujeres</font>",
"hombres" <- "<font face='Gulim'>hombres</font")
m <- leaflet(width = "100%", options = leafletOptions(minZoom = 10)) %>%
setView(-77.022933, -12.068522, zoom = 11) %>%
setMaxBounds(lng1 = -77.301865, lat1 = -12.525597, lng2 = -76.6, lat2 = -11.56)%>%
addProviderTiles(providers$CartoDB.Positron) %>%
addPolylines(data = not, weight = lw, color = "#D0D0D0", opacity =lo, group = "otras calles") %>%
addPolylines(data = males, weight = lw, color = "#f1c628", opacity =lo, group = "hombres") %>%
addPolylines(data = females_rel, weight = lw, color = "#5297ac", opacity =lo, group = "figuras religiosas mujeres",
label = females_rel$name) %>%
addPolylines(data = females_notrel, weight = lw, color = "#5297ac", opacity =lo, group = "mujeres no religiosas",
label = females_notrel$name) %>%
addPolygons( data = distritos, weight = 1, color = "#967aa1", group = "distritos", fill=FALSE) %>%
addLegend( position = "bottomright", opacity = 0.75,
labels = c("calles con nombre de mujer", "calles con nombre de hombre", "otras calles", "límite distrital"),
colors = c("#5297ac", "#f1c628", "#D0D0D0", "#967aa1")) %>%
addLayersControl( overlayGroups = groups,
options = layersControlOptions( collapsed = FALSE))
m
females <-
st_read("data/gdb_females.geojson", quiet = TRUE) %>% select(7, 21, 22)
males <-
st_read("data/male_coll_all_simp10.geojson", quiet = TRUE) %>% select(7)
not <-
st_read("data/not_sel_coll_all_simp10.geojson", quiet = TRUE)
